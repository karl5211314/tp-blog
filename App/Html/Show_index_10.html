<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
	<title>Document</title>
	<link rel="stylesheet" href="/blog45/Public/Css/common.css" />
	<script type="text/JavaScript" src='/blog45/Public/Js/jquery-1.7.2.min.js'></script>
	<script type="text/JavaScript" src='/blog45/Public/Js/common.js'></script>
	<link rel="stylesheet" href="/blog45/Public/Css/show.css" />
	<link rel="stylesheet" href="/blog45/Data/Ueditor/third-party/SyntaxHighlighter/shCoreDefault.css" />
	<script type="text/javascript" src="/blog45/Data/Ueditor/third-party/SyntaxHighlighter/shCore.js"></script>
	<script type="text/javascript">
	SyntaxHighlighter.all();
	</script>

</head>
<body>
<!--头部-->
	<div class='top-list-wrap'>
		<div class='top-list'>
			<ul class='l-list'>
				<li><a href="http://www.houdunwang.com" target='_blank'>后盾网</a></li>
				<li><a href="http://bbs.houdunwang.com" target='_blank'>后盾网论坛</a></li>
				<li><a href="http://study.houdunwang.com" target='_blank'>后盾学习社区</a></li>
			</ul>
			<ul class='r-list'>
				<li><a href="http://www.hdphp.com" target='_blank'>HDPHP框架</a></li>
				<li><a href="http://bbs.houdunwang.com" target='_blank'>免费视频教程</a></li>
			</ul>
		</div>
	</div>


	<div class='top-search-wrap'>
		<div class='top-search'>
			<a href="http://bbs.houdunwang.com" target='_blank' class='logo'>
				<img src="/blog45/Public/Images/logo.png"/>
			</a>
			<div class='search-wrap'>
				<form action="" method='get'>
					<input type="text" name='keyword' class='search-content'/>
					<input type="submit" name='search' value='搜索'/>
				</form>
			</div>
		</div>
	</div>


	<div class='top-nav-wrap'>
		<ul class='nav-lv1'>
			<li class='nav-lv1-li'>
				<a href="/blog45" class='top-cate'>博客首页</a>
			</li>

			<li class='nav-lv1-li'>
					<a href="/blog45/c_1.html" class='top-cate'>HTML</a>
						<ul>
							
						</ul>			
				</li><li class='nav-lv1-li'>
					<a href="/blog45/c_2.html" class='top-cate'>DIV+CSS</a>
						<ul>
							
						</ul>			
				</li><li class='nav-lv1-li'>
					<a href="/blog45/c_3.html" class='top-cate'>JavaScript</a>
						<ul>
						<li><a href="/blog45/c_8.html">jQuery</a></li><li><a href="/blog45/c_9.html">Ajax</a></li>	
						</ul>			
				</li><li class='nav-lv1-li'>
					<a href="/blog45/c_4.html" class='top-cate'>PHP</a>
						<ul>
						<li><a href="/blog45/c_10.html">字符串</a></li><li><a href="/blog45/c_11.html">数组</a></li><li><a href="/blog45/c_12.html">对象</a></li>	
						</ul>			
				</li><li class='nav-lv1-li'>
					<a href="/blog45/c_5.html" class='top-cate'>MySQL</a>
						<ul>
						<li><a href="/blog45/c_16.html">存储引擎</a></li><li><a href="/blog45/c_14.html">事务</a></li><li><a href="/blog45/c_15.html">视图</a></li><li><a href="/blog45/c_13.html">存储过程</a></li>	
						</ul>			
				</li><li class='nav-lv1-li'>
					<a href="/blog45/c_6.html" class='top-cate'>Linux</a>
						<ul>
						<li><a href="/blog45/c_17.html">基本命令</a></li><li><a href="/blog45/c_18.html">网络配置</a></li>	
						</ul>			
				</li><li class='nav-lv1-li'>
					<a href="/blog45/c_7.html" class='top-cate'>其他</a>
						<ul>
							
						</ul>			
				</li>		</ul>
	</div>
<!--主体-->
	<div class='main'>
		<div class='main-left'>
			<div class='location'>
				<a href="">首页</a>>
								<!-- 0 -->
					<a href="/blog45/c_4.html">PHP</a>><!-- 1 -->
					<a href="/blog45/c_12.html">对象</a>			</div>
			<div class="title">
				<p>无限级分类</p>
				<div>
					<span class='fl'>发布于：2017年02月16日</span>
					<span class='fr'>已被阅读<script type="text/javascript" src='/blog45/Index/Show/clickNum/id/10.html'></script>次</span>
				</div>
			</div>
			<div class='content' style='word-break:break-all'><pre class="brush:php;toolbar:false">&lt;?php

Class&nbsp;Category&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;/**
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;一、用递归做无限级分类&nbsp;组合一维数组
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;$cate:待处理数组
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;$pid
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;$level:等级
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;$html:层级符号
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
&nbsp;&nbsp;&nbsp;&nbsp;Static&nbsp;Public&nbsp;function&nbsp;unlimitedForLevel&nbsp;($cate,&nbsp;$html&nbsp;=&nbsp;&#39;--&#39;,&nbsp;$pid&nbsp;=&nbsp;0,&nbsp;$level&nbsp;=&nbsp;0)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$arr&nbsp;=&nbsp;array();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($cate&nbsp;as&nbsp;$v)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($v[&#39;pid&#39;]&nbsp;==&nbsp;$pid)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$v[&#39;level&#39;]&nbsp;=&nbsp;$level&nbsp;+&nbsp;1;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$v[&#39;html&#39;]&nbsp;=&nbsp;str_repeat($html,&nbsp;$level);&nbsp;//&nbsp;打印出$level个$html;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$arr[]&nbsp;=&nbsp;$v;&nbsp;//&nbsp;把$v压到$arr这个数组里
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$arr&nbsp;=&nbsp;array_merge($arr,&nbsp;self::unlimitedForLevel($cate,&nbsp;$html,&nbsp;$v[&#39;id&#39;],&nbsp;$level&nbsp;+&nbsp;1));
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;递归的还是这个数组$cate、填充的字符串还是$html，但是pid变成了当前$v的id号，同时level级&nbsp;+&nbsp;1；

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;最后一层一层的返回，返回$arr
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$arr;
&nbsp;&nbsp;&nbsp;&nbsp;}

&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;二、用递归组合多维数组&nbsp;组合多维数组
&nbsp;&nbsp;&nbsp;&nbsp;Static&nbsp;Public&nbsp;function&nbsp;unlimitedForLayer&nbsp;($cate,&nbsp;$name&nbsp;=&nbsp;&#39;child&#39;,&nbsp;$pid&nbsp;=&nbsp;0)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$arr&nbsp;=&nbsp;array();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($cate&nbsp;as&nbsp;$v)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($v[&#39;pid&#39;]&nbsp;==&nbsp;$pid)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$v[$name]&nbsp;=&nbsp;self::unlimitedForLayer($cate,&nbsp;$name,&nbsp;$v[&#39;id&#39;]);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$arr[]&nbsp;=&nbsp;$v;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$arr;

&nbsp;&nbsp;&nbsp;&nbsp;}

&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;三、传递一个子级分类的id返回所有的父级分类&nbsp;*/
&nbsp;&nbsp;&nbsp;&nbsp;Static&nbsp;Public&nbsp;function&nbsp;getParents($cate,&nbsp;$id)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$arr&nbsp;=&nbsp;array();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach($cate&nbsp;as&nbsp;$v)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($v[&#39;id&#39;]&nbsp;==&nbsp;$id){
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$arr[]&nbsp;=&nbsp;$v;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$arr&nbsp;=&nbsp;array_merge($arr,&nbsp;self::getParents($cate,&nbsp;$v[&#39;pid&#39;]));
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;/*
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;此方法找到的元素先是子级，然后是顶级，所以需要逆序
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PHP&nbsp;&gt;&gt;&nbsp;字符串&nbsp;&gt;&gt;&nbsp;字符串处理函数&nbsp;&gt;&gt;&nbsp;substr()
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($cate&nbsp;as&nbsp;$v)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$v[&#39;name&#39;]&nbsp;&#39;&gt;&gt;&#39;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;只需将递归调用array_merge中的两个元素调换一下位置：
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$arr&nbsp;=&nbsp;array_merge(self::getParents($cate,&nbsp;$v[&#39;pid&#39;]),&nbsp;$arr);

&nbsp;&nbsp;&nbsp;&nbsp;*/
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$arr;

&nbsp;&nbsp;&nbsp;&nbsp;}


//&nbsp;&nbsp;&nbsp;&nbsp;举例（商城中的分类层级表）
//&nbsp;&nbsp;&nbsp;&nbsp;服装&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;家用电器
//&nbsp;&nbsp;&nbsp;&nbsp;男装&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;女装
//&nbsp;&nbsp;&nbsp;&nbsp;T恤&nbsp;&nbsp;西装&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;衬衫&nbsp;&nbsp;&nbsp;&nbsp;裙子
//&nbsp;&nbsp;&nbsp;&nbsp;abc(假设是一个T恤服装品牌)

&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;四、传递一个父级分类ID返回所有子分类ID
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;$pid:父级ID
&nbsp;&nbsp;&nbsp;&nbsp;Static&nbsp;Public&nbsp;function&nbsp;getChildsId($cate,&nbsp;$pid)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$arr&nbsp;=&nbsp;array();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach($cate&nbsp;as&nbsp;$v)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($v[&#39;pid&#39;]&nbsp;==&nbsp;$pid){
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$arr[]&nbsp;=&nbsp;$v[&#39;id&#39;];
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$arr&nbsp;=&nbsp;array_merge($arr,self::getChildsID($cate,&nbsp;$v[&#39;id&#39;]));

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$arr;
&nbsp;&nbsp;&nbsp;&nbsp;}

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;五、传递一个父级分类ID返回所有子分类组成的数组&nbsp;*/
&nbsp;&nbsp;&nbsp;&nbsp;Static&nbsp;Public&nbsp;function&nbsp;getChilds($cate,&nbsp;$pid){
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$arr&nbsp;=&nbsp;array();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach($cate&nbsp;as&nbsp;$v){
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($v[&#39;pid&#39;]&nbsp;==&nbsp;$pid){
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$arr[]&nbsp;=&nbsp;$v;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$arr&nbsp;=&nbsp;array_merge($arr,self::getChilds($cate,&nbsp;$v[&#39;id&#39;]));
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$arr;
&nbsp;&nbsp;&nbsp;&nbsp;}





}

?&gt;</pre><p><br/></p></div>
		</div>
		<!--主体右侧-->
		<div class='main-right'>
			<!-- <dl>
	<dt>热门博文</dt>
	<dd>
			<a href="/blog45/5.html" target='_blank'>欢迎收看后盾网视频教程</a>
			<span>(100)</span>
		</dd><dd>
			<a href="/blog45/8.html" target='_blank'>PHP怎么来定义一个对象</a>
			<span>(100)</span>
		</dd><dd>
			<a href="/blog45/10.html" target='_blank'>无限级分类</a>
			<span>(11)</span>
		</dd></dl> -->
			<dl>
				<dt>热门博文</dt>
				<dd>
						<a href="/blog45/5.html">欢迎收看后盾网视频教程</a>
						<span>(100)</span>
					</dd><dd>
						<a href="/blog45/8.html">PHP怎么来定义一个对象</a>
						<span>(100)</span>
					</dd><dd>
						<a href="/blog45/10.html">无限级分类</a>
						<span>(11)</span>
					</dd>			</dl>

			<dl>
	<dt>最发布发</dt>
	<dd>
			<a href="/blog45/10.html">无限级分类</a>
			<span>(11)</span>
		</dd><dd>
			<a href="/blog45/8.html">PHP怎么来定义一个对象</a>
			<span>(100)</span>
		</dd><dd>
			<a href="/blog45/5.html">欢迎收看后盾网视频教程</a>
			<span>(100)</span>
		</dd></dl>
			<dl>
				<dt>友情连接</dt>
				<dd>
					<a href="">后盾网</a>
				</dd>

				<dd>
					<a href="">后盾网论坛</a>
				</dd>
				<dd>
					<a href="">后盾网学习社区</a>
				</dd>
			</dl>
		</div>
	</div>
<!--底部-->
<!--底部-->
	<div class='bottom'>
		<div></div>
	</div>
</body>
</html>